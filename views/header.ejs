<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link href="/css/sidebar.css" rel="stylesheet" type="text/css" />
    <link href="/css/commands.css" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.1.1/dist/chart.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>  
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>
</head>
<body>
  <!-- Top navbar -->
  <nav class="navbar sticky-top navbar-dark bg-dark">
    <div class="container-fluid">
      <form class="d-flex justify-content-start">
      <span class="navbar-brand mb-0 h1" style="font-size: 25px;margin-left: 30px;">Abei</span>
      <div class="dropdown align-items-start">
        <a class="btn btn-outline-info dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false" style="margin-left: 30px;">Select Guild</a>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
          <% for(var i = 0; i < ownedGuilds.length; i++){ %>
          <li><a class="dropdown-item" href=<%= `/guild/${ownedGuilds[i].id}` %>><%= ownedGuilds[i].name %></a></li>
          <% } %>
        </ul>
      </div>
    </form>
    <div class="dropdown align-items-start">
      <button class="btn btn-outline-primary" type="submit" onclick="window.location.pathname='/login'">Invite Bot</button>
      <button class="btn btn-outline-danger" type="submit" onclick="window.location.pathname='/logout'">Sign Out</button>
    </div>
    </div>
  </nav>
  <!-- end top navbar -->

  <!-- Sidebar -->
  <div class="bg-dark border-right" id="sidebar-wrapper" style="z-index: 999;">
    <div class="list-group list-group-flush">
      <a href=<%= currentGuild.id != null ? `/guild/${currentGuild.id}` : '/' %> class="list-group-item list-group-item-action bg-dark">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-display" viewBox="0 0 16 16" style="margin-right: 10px;">
          <path d="M0 4s0-2 2-2h12s2 0 2 2v6s0 2-2 2h-4c0 .667.083 1.167.25 1.5H11a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1h.75c.167-.333.25-.833.25-1.5H2s-2 0-2-2V4zm1.398-.855a.758.758 0 0 0-.254.302A1.46 1.46 0 0 0 1 4.01V10c0 .325.078.502.145.602.07.105.17.188.302.254a1.464 1.464 0 0 0 .538.143L2.01 11H14c.325 0 .502-.078.602-.145a.758.758 0 0 0 .254-.302 1.464 1.464 0 0 0 .143-.538L15 9.99V4c0-.325-.078-.502-.145-.602a.757.757 0 0 0-.302-.254A1.46 1.46 0 0 0 13.99 3H2c-.325 0-.502.078-.602.145z"/>
        </svg>
        Dashboard
      </a>
      <div class="accordion accordion-flush" id="accordionFlushExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="flush-headingOne">
            <a href=<%= `/guild/${ currentGuild.id }/commands`%> style="text-decoration: none;">
              <button class="accordion-button collapsed bg-dark" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne" style="color: #fff; border-radius: 0;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-list" viewBox="0 0 16 16" style="margin-right: 10px;">
                  <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
                  <path d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
                </svg>
                Commands
              </button>
            </a>
          </h2>
          <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample" style="border-radius: 0; background-color: #1d2124;">
            <% if(commands.isAtCommandsPage) {%>
              <% commands.categories.forEach(category => { %>
                <a href=<%= currentGuild.id != null ? `/guild/${currentGuild.id}/commands#${category}` : '/' %> class="list-group-item list-group-item-action bg-dark" style="text-align:center; background-color: #1d2124!important; text-decoration:none;">
                  <span style="text-decoration: none;"><%= category %></span>
                </a>
              <% }) %>
            <% } %>
          </div>
        </div>
      </div>
      <script type="text/javascript">
        if(window.location.href.endsWith('commands')){$('.collapse').addClass('show');}
      </script>
      <a href=<%= `/guild/${ currentGuild.id }/analytics`%> class="list-group-item list-group-item-action bg-dark">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart" viewBox="0 0 16 16" style="margin-right: 10px;">
          <path d="M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"/>
        </svg>
        Analytics
      </a>
    </div>
  </div>
  <!-- end sidebar -->
  <div id="main" class="container" style="margin-bottom: 100px;">
    <div class="d-flex flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3" style="border-bottom: 1px solid #e6d74f!important">
      <%- currentGuild.icon %> 
      <h1 class="h2" style="margin-left:20px;"><%= currentGuild.name %></h1>
    </div>